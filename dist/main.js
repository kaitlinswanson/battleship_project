document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".grid-user"),t=document.querySelector(".grid-computer"),n=document.querySelector(".grid-display"),r=document.querySelectorAll(".ship"),s=document.querySelector(".destroyer-container"),i=document.querySelector(".submarine-container"),a=document.querySelector(".cruiser-container"),o=document.querySelector(".battleship-container"),c=document.querySelector(".carrier-container"),d=(document.getElementById("start"),document.getElementById("rotate"));document.getElementById("turn"),document.getElementById("message");let l=!0;const u=[],g=[],m=10;function h(e,t,n){for(let r=0;r<n*n;r++){const n=document.createElement("div");n.dataset.id=r,e.appendChild(n),t.push(n)}}h(e,u,m),h(t,g,m);const f=[{name:"destroyer",directions:[[0,1],[0,m]]},{name:"submarine",directions:[[0,1,2],[0,m,20]]},{name:"cruiser",directions:[[0,1,2],[0,m,20]]},{name:"battleship",directions:[[0,1,2,3],[0,m,20,30]]},{name:"carrier",directions:[[0,1,2,3,4],[0,m,20,30,40]]}];function v(e){let t=Math.floor(Math.random()*e.directions.length),n=e.directions[t];0===t&&(direction=1),1===t&&(direction=10);let r=Math.abs(Math.floor(Math.random()*g.length-e.directions[0].length*direction));const s=n.some((e=>g[r+e].classList.contains("taken"))),i=n.some((e=>(r+e)%m==9)),a=n.some((e=>(r+e)%m==0));s||i||a?v(e):n.forEach((t=>g[r+t].classList.add("taken",e.name)))}let L,E,p;function y(){E=this,p=this.childNodes.length}function I(e){e.preventDefault()}function S(e){e.preventDefault()}function b(){console.log("drag leave")}function q(){let e=E.lastChild.id,t=e.slice(0,-2);console.log(t);let r=parseInt(e.substr(-1))+parseInt(this.dataset.id);if(selectedShipIndex=parseInt(L.substr(-1)),r-=selectedShipIndex,console.log(r),l)for(let e=0;e<p;e++)u[parseInt(this.dataset.id)-selectedShipIndex+e].classList.add("taken",t);else{if(l)return;for(let e=0;e<p;e++)u[parseInt(this.dataset.id)-selectedShipIndex+m*e].classList.add("taken",t)}n.removeChild(E)}function M(){}v(f[0]),v(f[1]),v(f[2]),v(f[3]),v(f[4]),d.addEventListener("click",(function(){return l?(s.classList.toggle("destroyer-container-vertical"),i.classList.toggle("submarine-container-vertical"),a.classList.toggle("cruiser-container-vertical"),o.classList.toggle("battleship-container-vertical"),c.classList.toggle("carrier-container-vertical"),void(l=!1)):l?void 0:(s.classList.toggle("destroyer-container"),i.classList.toggle("submarine-container"),a.classList.toggle("cruiser-container"),o.classList.toggle("battleship-container"),c.classList.toggle("carrier-container"),void(l=!0))})),r.forEach((e=>e.addEventListener("dragstart",y))),u.forEach((e=>e.addEventListener("dragstart",y))),u.forEach((e=>e.addEventListener("dragover",I))),u.forEach((e=>e.addEventListener("dragenter",S))),u.forEach((e=>e.addEventListener("dragleave",b))),u.forEach((e=>e.addEventListener("drop",q))),u.forEach((e=>e.addEventListener("dragend",M))),r.forEach((e=>e.addEventListener("mousedown",(e=>{L=e.target.id}))))}));